@import "../../../../so-widgets-bundle/base/less/mixins";
//replace above import path with below when moving this over to main widgets bundle
//"../../../base/less/mixins";

@icon_size: 1.3em;
@rounding: 0.25em;
@padding: 0.75em;

//need the placeholder item so that lessphp doesn't throw fatals when no networks are present
//better solution is probably to try make lessphp better at handling empty items etc
@networks: placeholder #ffffff #000000;

//we expect @networks to be a list of lists, but when there is only one network, there is no syntax to distinguish
//between a list with only one item (which is also a list) in it, and a list of any other types and as a result the
//length function returns the length of the one item in the list, instead of the length of the list.
//@networks_length: 1;
@networks_length: length(@networks);

//the recursive mixin which loops over the @networks list when it contains more than 1 item.
.loop(@counter) when (@counter > 0) and (@networks_length > 1) {
    .loop((@counter - 1));

    .social_media_style(extract(@networks, @counter));
}

//special handling for the case where there is only one network in the list
.loop(@counter) when (@counter = 1) and (@networks_length = 1) {
    .social_media_style(@networks);
}

.social_media_style(@network) {
    @name: extract(@network, 1);
    @icon_color: extract(@network, 2);
    @background_color: extract(@network, 3);

    @border_color: darken(@background_color, 15%);

    .sow-social-media-icon-@{name} {
        color: @icon_color !important;

        font-size: @icon_size;
        padding: @padding @padding*2;
        margin: 5px;

        .gradient(@background_color, darken(@background_color, 10%), @background_color);
        border: 1px solid;
        border-color: lighten(@border_color, 2%) @border_color darken(@border_color, 3%) @border_color;

        .rounded(@rounding);

        .box-shadow(~"inset 0 1px 0 rgba(255,255,255,0.2), 0 1px 2px rgba(0,0,0,0.065)");
        text-shadow: 0 1px 0 rgba(0,0,0,0.05);

        &:visited,
        &:active,
        &:hover{
            color: @icon_color !important;
        }

        &.ow-button-hover:hover {
            .gradient(lighten(@background_color, 2%), lighten(darken(@background_color, 10%), 2%), lighten(@background_color, 2%));
            border-color: lighten(lighten(@border_color, 2%), 2%) lighten(@border_color, 2%) darken(lighten(@border_color, 2%), 3%) lighten(@border_color, 2%);
            color: lighten(@icon_color, 2%);
        }
    }
}

.loop(@networks_length);
